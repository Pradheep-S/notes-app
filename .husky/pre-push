#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push checks..."

# Run tests for all projects
echo "ğŸ§ª Running tests..."

# Backend tests
echo "Testing backend..."
cd backend && npm test
if [ $? -ne 0 ]; then
  echo "âŒ Backend tests failed!"
  exit 1
fi

# Admin tests
echo "Testing admin dashboard..."
cd ../admin && npm test -- --run
if [ $? -ne 0 ]; then
  echo "âŒ Admin tests failed!"
  exit 1
fi

# Mobile tests
echo "Testing mobile app..."
cd ../mobile && flutter test
if [ $? -ne 0 ]; then
  echo "âŒ Mobile tests failed!"
  exit 1
fi

echo "âœ… All pre-push checks passed!"
